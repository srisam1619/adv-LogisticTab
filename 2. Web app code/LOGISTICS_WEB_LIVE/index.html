<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Logistics | Dashboard</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">
	 <link href="css/font-awesome.css" rel="stylesheet" type="text/css">
	 
	 <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyB4txr8p4SMSxJw1HjlekO529MBfV-gFMI"></script>
	

    <!-- Bootstrap Core Css -->
    <link href="plugins/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Waves Effect Css -->
    <link href="plugins/node-waves/waves.css" rel="stylesheet" />

    <!-- Animation Css -->
    <link href="plugins/animate-css/animate.css" rel="stylesheet" />

    <!-- Morris Chart Css-->
    <link href="plugins/morrisjs/morris.css" rel="stylesheet" />

    <!-- Custom Css -->
    <link href="css/style.css" rel="stylesheet">

    <!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
    <link href="css/themes/all-themes.css" rel="stylesheet" />
	
	
	
   <script src="plugins/jquery/jquery.min.js"></script>
    <script src="js/libs/angular.js"></script>
	<script src="js/libs/angular-sanitize.js"></script>
      <script src="js/libs/angular-route.js"></script>
     <script src="js/libs/angular-ui-router.js"></script>
    <script src="js/libs/ocLazyLoad.js"></script>
    <script src="js/libs/ui-bootstrap.js"></script>
    <script src="js/libs/ui-bootstrap-tpls-0.9.0.js"></script>
    <script src="js/libs/angular-cookies.js"></script>

<script src="js/libs/moment.js"></script>

  



<!-- angular js -->

    <script src="js/config/app.js"></script>
    <script src="js/services/util_factory.js" ></script>
	<script src="js/ctrl/dashbord_ctrl.js" ></script>

</head>

<body class="theme-purple"  ng-app="myApp" ng-controller="dashbord_ctrl">
<div class="loader" data-loadingss id="loadingss"><i class="fa fa-refresh fa-spin fa-fw"></i> Loading...</div>
	<!-- Top Bar -->
    <nav class="navbar bgheadergrate">
        <div class="container-fluid">
            <div class="navbar-header">
                <a href="javascript:void(0);" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false"></a>
                <a href="javascript:void(0);" class="bars"></a>
                <a class="navbar-brand" href="index.html">ADVENTUS</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <!-- Call Search -->
                    <li> <a href="login.html" style="text-decoration:none;" ><button class="btn-default btn"><i class="fa fa-hand-o-left" aria-hidden="true"></i>  &nbsp; logout</button></a></li>
					<li> <a href="users.html" style="text-decoration:none;" ><button class="btn-default btn" ng-hide = "hideme" id = "btnDrivers"><i class="fa fa-id-card-o" aria-hidden="true"></i>  &nbsp; Drivers</button></a></li>
					
					<li> <a href="index.html" style="text-decoration:none;" ><button class="btn-default btn"><i class="fa fa-home" aria-hidden="true"></i>  &nbsp; Home</button></a></li>
                    <!-- #END# Call Search -->
                    <!-- Notifications -->
                    
                    <!-- #END# Notifications -->
                    <!-- Tasks -->
                    
                    <!-- #END# Tasks -->
                    
                </ul>
            </div>
        </div>
    </nav>
    <!-- #Top Bar -->
	
	<section class="content">
        <div class="container-fluid">
          	
            <!-- CPU Usage -->
            <div class="row clearfix">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card"  >
                        <div class="header" style="background:#0a5e3f;height:60px" >
                         <div style="float:left"><h2 style="color:#FFFFFF;width:250px;" >Search Filters </h2></div>
						 
						 
						 <div class="pull-right" style="cursor:pointer;color:#FFFFFF;" data-toggle="collapse"  data-target="#demo" ><i class="fa fa-expand fa-2x" aria-hidden="true"></i> Expand/Collapse</div>
						
						
                        </div>
                        <div class="body collapse" id="demo" >
						 <div class="row searchbar"> 
                            <div class="col-lg-8">
			  	<div class="col-lg-6"><div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 control-label">
                            DO From Date:
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control datepickerddd" id="DocDate" ng-model='sText.DocDate'  />
                        </div>
                    </div></div>
				<div class="col-lg-6"><div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 control-label">
                            DO To Date:
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control datepickerddd" id="DocDueDate"  ng-model='sText.DocDueDate'  />
                        </div>
                    </div></div>
				
				<div class="col-lg-6"><div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 control-label">
                            DO No:
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control"  ng-model='sText.DocNum'  />
                        </div>
                    </div></div>
				<div class="col-lg-6"><div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 control-label">
                             Service Call No:
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control"  ng-model='sText.SvcCall'  />
                        </div>
                    </div></div>
					
					<div class="col-lg-6"><div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 control-label">
                           Customer Name:
                        </label>
                        <div class="col-sm-7">
                            <input type="text" class="form-control"  ng-model='sText.CustomerName'  />
                        </div>
                    </div></div>
				
					
					
				
			  
			  </div>
			  <div class="col-lg-4">
				  <div class="col-lg-12"><div class="form-group">
							<label for="inputEmail3" class="col-sm-5 control-label">
								Item Code:
							</label>
							<div class="col-sm-7">
								 <input type="text" class="form-control"  ng-model='sText.EquipmentCode'  />
							</div>
						</div></div>
				  
						
				  
					
					 
			      
			  </div>
			  <div class="col-lg-4">
				  <div class="col-lg-12"><div class="form-group">
							<label for="inputEmail3" class="col-sm-5 control-label">
								Item Name:
							</label>
							<div class="col-sm-7">
								 <input type="text" class="form-control"  ng-model='sText.EquipmentName'  />
							</div>
						</div></div>
				  
						
				  
					
					 
			      
			  </div>
			  <div class="col-lg-4">
				  <div class="col-lg-12"><div class="form-group">
							<label for="inputEmail3" class="col-sm-5 control-label">
								  Trip Type:
							</label>
							<div class="col-sm-7">
								  <div class="switch panel-switch-btn" style="top: 0px; ">
                                    
                                    <label>AM<input type="checkbox" id="realtime" checked><span class="lever switch-col-cyan"></span>PM</label>
                                </div>
							</div>
						</div></div>
				  
						
				  
					
					 
			      
			  </div>
			  </div>
			  <div align="center">
              <button class="btn-success btn" ng-click="Search();" >SEARCH</button>&nbsp
              <button class="btn-info btn" ng-click="sfilter();" > Clear</button></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- #END# CPU Usage -->
            

            <div class="row clearfix">
                <!-- Task Info -->
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="header" style="height:60px;">
                            <div class="col-lg-2 col-sm-2" style="padding-right: 0px;"><strong>Number of DO : {{CallAssignment.length}}</strong></div>
							 <div class="col-lg-2 col-sm-2"><strong>Total Qty :  <i class="fa fa-plus" aria-hidden="true" style="cursor:pointer" ng-click="GetCallAssignmentItem();" ></i> &nbsp;{{CallAssignmentItemTotal}} </strong> </div>
							 <!--<div class="col-lg-2"><a href="map.html"><button class="btn-info btn"> Get Driver Location Map</button></a></div>-->
							
							<button class="btn btn-success pull-right" type="button" ng-click="dostatuscheck();" data-toggle="dropdown">Delivery Status
  </button>
                           <!-- <div class="dropdown pull-right">
  <button class="btn btn-success dropdown-toggle" type="button" ng-click="dostatuscheck();" data-toggle="dropdown">Delivery Status
  <span class="caret"></span></button>
  <ul class="dropdown-menu">
    <li ng-click="DOCALL();" ><a href="#"><i class="fa fa-handshake-o" aria-hidden="true"></i> For Deals</a></li>
    <li ng-click="DOSTATUSTP();" ><a href="#"><i class="fa fa-print" aria-hidden="true"></i> For Toner</a></li>
  </ul>
</div> !-->




                            <!-- <div class="pull-right  col-lg-1" style="cursor:pointer;" > <button class="btn-default btn" ></button></div>
                              <div class="pull-right  col-lg-1" style="cursor:pointer;" ng-click="DOCALL();"><img  src="images/dostatus.JPG"" width="" height="35" /></div>

                             <div class="pull-right" style="cursor:pointer;" > <button class="btn-default btn" ></button></div>-->

                              <div class="pull-right  col-lg-1" style="cursor:pointer;padding-left: 20px;" ng-click="EATcal();" ><img src="images/eat.JPG" width="62" height="31" /></div>

                            

                              <div class="pull-right" style="cursor:pointer;" > <button class="btn-info btn" ng-click="updateDrogOrder();" >Update Sort Order</button></div>
                            
                        </div>
                        <div class="body" >
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover" id="myTable">
                                    <thead>
                                        <tr style="background:#000f16;color:#FFFFFF">
                                            <th>#</th>
                                            <th style="width: 6%;">Postal Code</th>
                                            <th style="width: 10%;">Address</th>
                                            <th>Type</th>
                                            <th>DO #</th>
											<th>Svs Call #</th>
											<th style="width: 3%;">Customer Name</th>
											<th>Contact Person / Contact #</th>
											<th style="width: 5%;">Remarks</th>
											<th>Item</th>
											<th>ETA</th>
												   
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="d in CallAssignment  | orderBy:'DragOrder'">
                                            <td>{{$index+1}}</td>
                                            <td>{{d.PostalCode}}</td>
                                            <td>{{d.Address}}</td>
                                            <td>{{d.TYPE}}</td>
                                            <td>{{d.DocNum}}</td>
											<td>{{d.SvcCall}}</td>
											<td>{{d.CustomerName}}</td>
											<td>{{d.ContactPerson}}</td>
											<td>{{d.Remarks}}</td>
											<td ng-bind-html="d.Item | newline"></td>
											<td><input type="text" class="form-control" ng-model="d.ETA" /></td>
                                        </tr>
										<tr  ng-show="!CallAssignment.length">
    <td colspan="12" style="color:#FF0000;" align="center">No Data Found..</td>
	</tr>
                                      
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- #END# Task Info -->
               
            </div>
			
			<div class="row clearfix">
                <!-- Task Info -->
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="card">
                        <div class="header" style="height:60px;">
                            <div class="col-lg-2 col-sm-3"><strong>Number of DO : {{GetCompletedCallDATA.length}}</strong></div>
							 <div class="col-lg-2 col-sm-3"><strong>Total Collected : <i data-toggle="modal" data-target="#myModal" class="fa fa-plus" aria-hidden="true"></i>  &nbsp;{{GetCompletedCallItemsTotal}} </strong></div>
							 
							 
							  <div class="pull-right" style="cursor:pointer" data-toggle="collapse" data-target="#2ndtable" ><i class="fa fa-expand fa-2x" aria-hidden="true"></i></div>
                            
                        </div>
                        <div class="body collapse" id="2ndtable">
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover">
                                    <thead>
                                        <tr style="background:#b4d375;color:#000000">
                                            <th>#</th>
                                            <th>Email Sent Date</th>
                                            <th>Email Sent Time</th>
                                            <th>Type</th>
                                            <th>DO #</th>
											<th>Svs Call #</th>
											<th>Customer Name</th>
											<th>Contact Person</th>
											<th>E-mail</th>
											<th>Completion Time</th>
											<th>Add Additional Attachments</th>
											
												   
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr  ng-repeat="d in GetCompletedCallDATA">
                                            <td>{{$index+1}}</td>
                                            <td>{{d.EmailSentDate}}</td>
                                            <td>{{d.EmailSentTime}}</td>
                                            <td>{{d.TYPE}}</td>
                                            <td>{{d.DocNum}}</td>
											<td>{{d.SvcCall}}</td>
											<td>{{d.CustomerName}}</td>
											<td>{{d.ContactPerson}}</td>
											<td>{{d.Email}}</td>
											<td>{{d.CompletionTime}}</td>
											<td align="center"><i ng-click="addAttchment($index);" class="fa fa-camera fa-3x" aria-hidden="true"></i></td>
											
                                        </tr>
										
										<tr  ng-show="!GetCompletedCallDATA.length">
    <td colspan="12" style="color:#FF0000;" align="center">No Data Found..</td>
	</tr>
										
                                      
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- #END# Task Info -->
               
            </div>
        </div>
    </section>
</body>
  <!-- Jquery Core Js -->
    <script src="plugins/jquery/jquery.min.js"></script>
	<link href="css/jquery.orderable.css" rel="stylesheet">
<!--<script src="js/jquery.mobile-1.4.5.js"></script>-->


    <!-- Bootstrap Core Js -->
    <script src="plugins/bootstrap/js/bootstrap.js"></script>
	<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
	<link href="https://code.jquery.com/ui/jquery-ui-git.css" rel="stylesheet" type="text/css" />
	<script src="js/libs/jquery-ui-timepicker-addon.js"></script>
	<script src="js/jquery.ui.touch-punch.min.js"></script>
	
	<script>
	/*$("#myTable").orderable({
  tolerance: "pointer"
});*/
	
	$( function() {
    $( ".datepickerddd" ).datepicker({ dateFormat: 'dd/mm/yy'});
	$('.datetimeinput').timepicker({ timeFormat: "hh:mm TT"});
  } );

</script>



  
  
<!-- Modal -->
<div id="AssignmentItem" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Item Listing</h4>
      </div>
      <div class="modal-body">
        <table width="100%" border="0" cellspacing="5" cellpadding="5" class="table table-striped" >
  <tr style="background:#990066;color:#FFFFFF">
    <th>No</th>
    <th>Item Code</th>
    <th>Item Name</th>
    <th>Qty</th>
  </tr>
  <tr  ng-repeat="d in CallAssignmentItem">
    <td>{{d.DocNum}}</td>
    <td>{{d.ItemCode}}</td>
    <td>{{d.ItemName}}</td>
    <td>{{d.Quantity}}</td>
  </tr>
  <tr><td colspan="3" align="right">Total: </td><td>{{CallAssignmentItemTotal}}</td></tr>
</table>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Item Listing</h4>
      </div>
      <div class="modal-body">
        <table width="100%" border="0" cellspacing="5" cellpadding="5" class="table table-striped" >
  <tr style="background:#990066;color:#FFFFFF">
    <th>No</th>
    <th>Item Code</th>
    <th>Item Name</th>
    <th>Qty</th>
  </tr>
  <tr ng-repeat="d in GetCompletedCallItems">
    <td>{{d.No}}</td>
    <td>{{d.ItemCode}}</td>
    <td>{{d.ItemName}}</td>
    <td>{{d.Quantity}}</td>
  </tr>
  <tr><td colspan="3" align="right">Total: </td><td>{{GetCompletedCallItemsTotal}}</td></tr>
</table>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- EAT Modal -->
<div id="EATModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><i class="fa fa-truck" aria-hidden="true"></i> ETA (Estimated Time of Arrival)</h4>
      </div>
      <div class="modal-body">
        <table width="100%" border="0" cellspacing="5" class="table-striped table" cellpadding="5">
  <tr>
    <td>DO #</td>
    <td>&nbsp;</td>
    <td>{{EATD.DocNum}}</td>
  </tr>
  <tr>
    <td>Service Call No.</td>
    <td>&nbsp;</td>
    <td>{{EATD.SvcCall}}</td>
  </tr>
  <tr>
    <td>Customer:</td>
    <td>&nbsp;</td>
    <td>{{EATD.CustomerName}}</td>
  </tr>
  <tr>
    <td>Address</td>
    <td>&nbsp;</td>
    <td>{{EATD.Address}}</td>
  </tr>
  <tr>
    <td>ETA Time</td>
    <td></td>
    <td><span id="EATTIMEERROR" style="color:#FF0000;"></span><input type="text" readonly ng-model="EATTIME" id="EATTIME" class="form-control datetimeinput" /></td>
  </tr>
  <tr>
    <td>ETA Date</td>
    <td></td>
    <td><span id="EATTIMEERROR" style="color:#FF0000;"></span><input type="text" readonly ng-model="EATDATE" id="EATDATE"  class="form-control datepickerddd" /></td>
  </tr>
</table>


      </div>
      <div class="modal-footer">
        <button class="btn-success btn" ng-click="UpdateEAT();">Update</button>
      </div>
    </div>

  </div>
</div>


<!-- Attachment Modal -->
<div id="AttchmentModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title"><i class="fa fa-truck" aria-hidden="true"></i> Attchment</h4>
      </div>
      <div class="modal-body">
        


<div class="col-lg-12" ng-show="Fileloading">
                    <div class="form-group">
                        
                        <div class="col-sm-12">
						 <form method="post" id="fileinfo" name="fileinfo">
           <div class="col-lg-8 col-sm-8"><input type="file" id="fileopen" file-model="myFile" class="form-control"/></div>                
     

<div class="col-lg-4 col-sm-4 pull-right"><button ng-click="uploadFile();" class="btn-success btn" > Upload&hellip; </button></div>

 </form>
                           
                        </div>
                    </div>
                  
                   
                </div>
                <div class="col-lg-12" ng-hide="Fileloading"><div class="progress" style="height:40px;">
    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%;font-size:20px;line-height:25px;">
      Loading...
    </div>
  </div></div>
  
  <table style="margin-top:60px;" width="100%" border="0" cellspacing="0" cellpadding="0" class="table-bordered table">
  <tr style="background:#333333;color:#FFFFFF;">
    <th>No</th>
    <th>File Name</th>
    <th>File Path</th>
  </tr>
  <tr ng-repeat="d in AttachmentData">
    <td>{{$index+1}}</td>
    <td><a download href="{{Host}}TempAttachments/{{d.FileName}}.{{d.FileExtension}}">{{d.FileName}}</a></td>
    <td>{{d.FilePath}}</td>
  </tr>
</table>

      </div>
      <div class="modal-footer">
        <button class="btn btn-info" ng-click="saveAttachment();"> Save </button>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">

var fixHelperModified = function(e, tr) {
    var $originals = tr.children();
    var $helper = tr.clone();
	//console.log();
	$helper.css("background-color", "#c00"); 
	$helper.css("color","#fff"); 
    $helper.children().each(function(index) {
        $(this).width($originals.eq(index).width())
    });
    return $helper;
},
    updateIndex = function(e, ui) {
        $('td.index', ui.item.parent()).each(function (i) {
            $(this).html(i + 1);
        });
    };

$("#myTable>tbody").sortable({
    helper: fixHelperModified,
    stop: updateIndex
}).disableSelection();</script>

<!--<script>
 $( "#myTable>tbody" ).sortable();
    $( "#myTable" ).disableSelection();
</script> -->
</html>
